{"version":3,"sources":["api/geocoding.tsx","api/twitter.tsx","utils/twitter/twitterUrls.tsx","utils/twitter/twitterEntities.tsx","components/common/TweetText.tsx","components/common/TweetDisplay.tsx","components/map/Map.tsx","utils/map.tsx","assets/map_marker.png","assets/search.svg","components/common/LoadingIndicator.tsx","components/sidebar/InfiniteScroll.tsx","components/sidebar/Sidebar.tsx","App.tsx","index.tsx"],"names":["getLocationDetails","locationNames","a","urlWithParams","encodeURIComponent","JSON","stringify","fetch","response","ok","json","error","Error","detail","searchTweets","hashtag","nextToken","TWITTER_BASE_URL","getUserProfileURL","username","extractEntityContent","entity","type","tag","url","extractEntityURL","TweetText","tweet","text","entities","tweetEntities","hashtags","map","mentions","urls","getTweetEntities","entityMap","forEach","content","currIndex","indexOf","length","entityIndices","Object","keys","index","parseInt","sort","b","result","entityIndex","entityContent","push","substring","className","href","onClick","e","stopPropagation","target","rel","substr","TweetDisplay","window","open","author","id","getTweetURL","focus","alt","src","profile_image_url","name","date","created_at","Map","tweetLocations","tweets","mapContainer","React","useRef","displayTweets","locationsMap","filter","location","locationDetails","geometry","coordinates","lon","lat","properties","data","convertTweetToMapboxFeature","convertTweetsToMapboxFeatures","useEffect","mapboxgl","accessToken","process","current","container","style","zoom","currentMap","on","loadImage","image","loadedImage","addImage","addSource","features","addLayer","source","layout","loaded","getSource","Promise","resolve","setTimeout","setData","popup","Popup","maxWidth","Math","abs","lngLat","lng","div","document","createElement","parse","ReactDOM","render","setLngLat","setDOMContent","addTo","getCanvas","cursor","ref","LoadingIndicator","isLoading","color","height","visible","width","InfiniteScroll","children","loadMore","useState","setIsLoading","observer","lastElementRef","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","observe","child","Sidebar","loadMoreTweets","updateHashtag","hashtagInput","setHashtagInput","searchBar","SearchIcon","onChange","value","onKeyPress","key","placeholder","App","setHashtag","setTweets","undefined","pageToken","setPageToken","setLocationDetails","setError","loadTweets","tweetsJson","next_token","locationName","locationsJson","message","newHashtag","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.55ce46c9.chunk.js","sourcesContent":["import { APIError, LocationsAPIResponse } from 'utils/types';\n\nconst API_ENDPOINT = 'https://secure-anchorage-29952.herokuapp.com';\nconst API_ROUTE = '/api/locations';\n\n// Retrieve tweets containing a given hashtag.\n// The parameter 'nextToken' is optional and is\n// used to fetch the next page of results.\nconst getLocationDetails = async (locationNames: string[])\n: Promise<LocationsAPIResponse> => {\n  const urlWithParams = `${API_ENDPOINT}${API_ROUTE}?names=${encodeURIComponent(JSON.stringify(locationNames))}`;\n  const response = await fetch(urlWithParams);\n  if (response.ok) {\n    return (await response.json()) as LocationsAPIResponse;\n  }\n  const error: APIError = await response.json();\n  throw new Error(error.detail);\n};\n\nexport default getLocationDetails;\n","import { APIError, SearchTweetsAPIResponse } from 'utils/types';\n\nconst API_ENDPOINT = 'https://secure-anchorage-29952.herokuapp.com';\nconst API_ROUTE = '/api/tweets';\n\n// Retrieve tweets containing a given hashtag.\n// The parameter 'nextToken' is optional and is\n// used to fetch the next page of results.\nconst searchTweets = async (hashtag: string, nextToken?: string)\n: Promise<SearchTweetsAPIResponse> => {\n  const urlWithParams = `${API_ENDPOINT}${API_ROUTE}?hashtag=${hashtag}${nextToken ? `&next_token=${nextToken}` : ''}`;\n  const response = await fetch(urlWithParams);\n  if (response.ok) {\n    return (await response.json()) as SearchTweetsAPIResponse;\n  }\n  const error: APIError = await response.json();\n  throw new Error(error.detail);\n};\n\nexport default searchTweets;\n","import { Tweet } from 'utils/types';\n\nconst TWITTER_BASE_URL = 'http://twitter.com';\n\nexport const getUserProfileURL = (username: string): string => `\n    ${TWITTER_BASE_URL}/${username}\n`;\n\nexport const getTweetURL = (tweet: Tweet): string => `\n    ${TWITTER_BASE_URL}/${tweet.author.username}/status/${tweet.tweet.id}\n`;\n\nexport const getHashtagURL = (hashtag: string): string => `\n    ${TWITTER_BASE_URL}/hashtag/${hashtag}?src=hashtag_click\n`;\n","import { getHashtagURL, getUserProfileURL } from 'utils/twitter/twitterUrls';\nimport {\n  GenericTweetEntity,\n  HashtagEntity,\n  MentionEntity,\n  Tweet,\n  URLEntity,\n} from 'utils/types';\n\nexport const extractEntityContent = (entity: GenericTweetEntity): string => {\n  switch (entity.type) {\n    case 'hashtag':\n      return `#${entity.tag}`;\n    case 'mention':\n      return `@${entity.username}`;\n    case 'url':\n      return entity.url;\n    default:\n      return '';\n  }\n};\n\nexport const extractEntityURL = (entity: GenericTweetEntity): string => {\n  switch (entity.type) {\n    case 'hashtag':\n      return getHashtagURL(entity.tag);\n    case 'mention':\n      return getUserProfileURL(entity.username);\n    case 'url':\n      return entity.url;\n    default:\n      return '';\n  }\n};\n\nexport const getTweetEntities = (tweet: Tweet): GenericTweetEntity[] => {\n  const tweetEntities = tweet.tweet.entities;\n  return [\n    ...tweetEntities.hashtags?.map((entity): HashtagEntity => ({ ...entity, type: 'hashtag' })) ?? [],\n    ...tweetEntities.mentions?.map((entity): MentionEntity => ({ ...entity, type: 'mention' })) ?? [],\n    ...tweetEntities.urls?.map((entity): URLEntity => ({ ...entity, type: 'url' })) ?? [],\n  ];\n};\n","import React from 'react';\n\nimport 'styles/common/TweetText.scss';\n\nimport { extractEntityContent, extractEntityURL, getTweetEntities } from 'utils/twitter/twitterEntities';\nimport {\n  GenericTweetEntity,\n  Tweet,\n} from 'utils/types';\n\ninterface TweetTextProps {\n  tweet: Tweet;\n}\n\ninterface EntityMap {\n  [index: number]: GenericTweetEntity;\n}\n\n/**\n * Take a tweet's source text and embed it with necessary hyperlinks.\n */\nconst TweetText = ({ tweet }: TweetTextProps): JSX.Element => {\n  const { text } = tweet.tweet;\n  const entities = getTweetEntities(tweet);\n\n  // Map of index (in the text) to Entity\n  const entityMap: EntityMap = {};\n  entities.forEach((entity) => {\n    const content = extractEntityContent(entity);\n    let currIndex = text.indexOf(content);\n    while (currIndex !== -1) {\n      if (!entityMap[currIndex]\n        // Some entities are prefixes of others,\n        // so use the entity with greatest length\n        || content.length > extractEntityContent(entityMap[currIndex]).length) {\n        entityMap[currIndex] = entity;\n      }\n      currIndex = text.indexOf(content, currIndex + 1);\n    }\n  });\n\n  const entityIndices = Object.keys(entityMap).map((index) => parseInt(index, 10));\n  entityIndices.sort((a, b) => a - b);\n\n  const result: JSX.Element[] = [];\n  let currIndex = 0;\n\n  entityIndices.forEach((entityIndex) => {\n    const entity = entityMap[entityIndex];\n    const entityContent = extractEntityContent(entity);\n    if (currIndex < entityIndex) {\n      result.push(<span key={`Text ${currIndex}`}>{text.substring(currIndex, entityIndex)}</span>);\n    }\n    result.push((\n      <a\n        className=\"entityLink\"\n        href={extractEntityURL(entity)}\n        key={`Entity ${entityIndex}`}\n        onClick={(e) => { e.stopPropagation(); }}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        {text.substr(entityIndex, entityContent.length)}\n      </a>\n    ));\n    currIndex = entityIndex + entityContent.length;\n  });\n  result.push(<span key=\"Remaining text\">{text.substr(currIndex)}</span>);\n  return <div>{result}</div>;\n};\n\nexport default TweetText;\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\nimport TimeAgo from 'react-timeago';\n\nimport TweetText from 'components/common/TweetText';\n\nimport 'styles/common/TweetDisplay.scss';\n\nimport { getUserProfileURL, getTweetURL } from 'utils/twitter/twitterUrls';\nimport { Tweet } from 'utils/types';\n\ninterface TweetProps {\n    tweet: Tweet;\n}\n\nconst TweetDisplay = ({ tweet }: TweetProps): JSX.Element => (\n  <div\n    className=\"tweetContainer\"\n    onClick={() => {\n      window.open(getTweetURL(tweet))?.focus();\n    }}\n  >\n    <div>\n      <a\n        href={getUserProfileURL(tweet.author.username)}\n        onClick={(e) => { e.stopPropagation(); }}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        <img alt=\"User Avatar\" className=\"userAvatar\" src={tweet.author.profile_image_url} />\n      </a>\n    </div>\n    <div className=\"tweetBody\">\n      <div className=\"tweetHeader\">\n        <a\n          href={getUserProfileURL(tweet.author.username)}\n          onClick={(e) => { e.stopPropagation(); }}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <span className=\"authorName\">{tweet.author.name}</span>\n        </a>\n        <div className=\"dotSeparator\">\n          Â·\n        </div>\n        <span className=\"timestamp\">\n          <TimeAgo date={tweet.tweet.created_at} />\n        </span>\n      </div>\n      <div className=\"tweetText\">\n        <TweetText tweet={tweet} />\n      </div>\n    </div>\n  </div>\n);\n\nexport default TweetDisplay;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\n\nimport MapMarker from 'assets/map_marker.png';\n\nimport TweetDisplay from 'components/common/TweetDisplay';\n\nimport 'styles/map/Map.scss';\n\nimport { convertTweetsToMapboxFeatures } from 'utils/map';\nimport { LocationsMap, Tweet } from 'utils/types';\n\ninterface MapProps {\n    tweetLocations: LocationsMap;\n    tweets: Tweet[];\n}\n\nconst Map = ({ tweetLocations, tweets }: MapProps): JSX.Element => {\n  const mapContainer = React.useRef<HTMLDivElement>(null);\n  const map = React.useRef<mapboxgl.Map | null>(null);\n  const displayTweets = convertTweetsToMapboxFeatures(tweets, tweetLocations);\n\n  // Initialize the map\n  React.useEffect(() => {\n    mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN ?? '';\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current ?? '',\n      style: 'mapbox://styles/mapbox/dark-v10',\n      zoom: -1,\n    });\n  }, []);\n\n  // Load the marker image and display markers on the map\n  React.useEffect(() => {\n    if (map.current == null) {\n      return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const currentMap = map.current!;\n    currentMap.on('style.load', () => {\n      currentMap.loadImage(MapMarker, (error, image) => {\n        if (error) throw error;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const loadedImage = image!;\n        currentMap.addImage('custom-marker', loadedImage);\n        currentMap.addSource('points', {\n          data: {\n            type: 'FeatureCollection',\n            features: displayTweets,\n          },\n          type: 'geojson',\n        });\n        currentMap.addLayer({\n          id: 'symbols',\n          type: 'symbol',\n          source: 'points',\n          layout: {\n            'icon-allow-overlap': true,\n            'icon-image': 'custom-marker',\n            'icon-size': 0.6,\n          },\n        });\n      });\n    });\n  }, []);\n\n  // Update the map when Tweet information is updated\n  React.useEffect(() => {\n    (async () => {\n      if (map.current !== null) {\n        // Wait for map to be loaded first\n        while (!map.current.loaded || !map.current.getSource('points')) {\n          // eslint-disable-next-line no-await-in-loop\n          await new Promise((resolve) => setTimeout(resolve, 200));\n        }\n        const geoJsonSource = map.current.getSource('points') as mapboxgl.GeoJSONSource;\n        geoJsonSource.setData({\n          type: 'FeatureCollection',\n          features: displayTweets,\n        });\n      }\n    })();\n  }, [tweetLocations, tweets]);\n\n  // Display popup when user hovers over a marker\n  React.useEffect(() => {\n    const currentMap = map.current;\n    // Create a popup, but don't add it to the map yet.\n    const popup = new mapboxgl.Popup({\n      maxWidth: '300px',\n    });\n    if (currentMap !== null) {\n      currentMap.on('click', 'symbols', (e) => {\n        if (e.features && e.features[0].geometry.type === 'Point') {\n          const { coordinates } = e.features[0].geometry;\n\n          // Ensure that if the map is zoomed out such that multiple\n          // copies of the feature are visible, the popup appears\n          // over the copy being pointed to.\n          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n          }\n\n          // Create component programmatically in order to insert it as html\n          const div = document.createElement('div');\n          const tweet = JSON.parse(e.features?.[0].properties?.data);\n          ReactDOM.render(<TweetDisplay tweet={tweet} />, div);\n\n          // Populate the popup and set its coordinates\n          // based on the feature found.\n          popup.setLngLat([coordinates[0], coordinates[1]])\n            .setDOMContent(div)\n            .addTo(currentMap);\n        }\n      });\n\n      // Change cursor to a pointer when the it enters a feature in the 'symbols' layer.\n      currentMap.on('mouseenter', 'symbols', () => {\n        currentMap.getCanvas().style.cursor = 'pointer';\n      });\n\n      // Change cursor back to a pointer when it leaves a feature in the 'symbols' layer\n      currentMap.on('mouseleave', 'symbols', () => {\n        currentMap.getCanvas().style.cursor = '';\n      });\n    }\n  }, []);\n\n  return <div ref={mapContainer} className=\"map\" />;\n};\n\nexport default Map;\n","import {\n  LocationDetails,\n  LocationsMap,\n  MapboxFeature,\n  Tweet,\n} from 'utils/types';\n\n// Create a Mapbox feature from a Tweet. Used by Mapbox to display the Tweet.\nconst convertTweetToMapboxFeature = (tweet: Tweet, locationDetails: LocationDetails)\n: MapboxFeature => ({\n  geometry: {\n    type: 'Point',\n    coordinates: [locationDetails.lon, locationDetails.lat],\n  },\n  properties: {\n    data: tweet,\n  },\n  type: 'Feature',\n});\n\n// Create Mapbox features for all Tweets that have location details.\n// eslint-disable-next-line import/prefer-default-export\nexport const convertTweetsToMapboxFeatures = (tweets: Tweet[], locationsMap: LocationsMap)\n: MapboxFeature[] => {\n  const tweetsWithLocations = tweets.filter(\n    (tweet) => tweet.author.location && locationsMap[tweet.author.location],\n  );\n  return tweetsWithLocations.map(\n    (tweet) => convertTweetToMapboxFeature(tweet, locationsMap[tweet.author.location ?? '']),\n  );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAMAAACo9wirAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUVBMVEX///9CZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPsArO59lfytvP1mgfz////o7P/c4v6VqP2hsv25xf709v/Ez/6Jnv3zlxxEAAAADnRSTlMAMIDAUNAgQGAQ4JCwcIspriIAAAABYktHRACIBR1IAAAAB3RJTUUH5QgcDysw+xcJjwAAAAFvck5UAc+id5oAAAEKSURBVDjLfZTtGoIgDIVRErV0IFpa93+hGcE2lXF++LHzPnMMplKoqtYQpOtKXXVrgKm5nWyj4SRtuN9CRi35HWTVYXUgKNba3yXg3gfgAaIeYQHxxbopxSdn45PhCbyf3e/uZu95Cqxg8buW/xWroC8APD3qiUHDe0QA71ZNL0vyF4rVHHgl4CUAawJWAdgSsHGAirRUpMVgy3bqTcCb7xdf5eym6ddIWufeySE+frY1Zrbr9onBYQdGKGhUvNcZhYM5yP4gn9i0yCAt+bp06FkCMYXGuRAWwmYr24uRz54ufSAMzxXoj+N9Gb/LL+I0wJ1SRSLjH4iszwjBR0L04660qqCqacwx8gXR7DNsGIBhpQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOC0yOFQxNTo0Mzo0OCswMDowMNlRykYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDgtMjhUMTU6NDM6NDgrMDA6MDCoDHL6AAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/search.a9a21c42.svg\";","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nimport 'styles/common/LoadingIndicator.scss';\n\ninterface LoadingIndicatorProps {\n    isLoading: boolean;\n}\n\nconst LoadingIndicator = ({ isLoading }: LoadingIndicatorProps): JSX.Element => (\n  <div className=\"loader\">\n    <Loader\n      color=\"#1DA1F2\"\n      height={25}\n      type=\"Oval\"\n      visible={isLoading}\n      width={25}\n    />\n  </div>\n);\n\nexport default LoadingIndicator;\n","import React from 'react';\n\nimport LoadingIndicator from 'components/common/LoadingIndicator';\n\nimport 'styles/sidebar/InfiniteScroll.scss';\n\ninterface InfiniteScrollProps {\n    children: React.ReactNode[];\n    error: string | undefined;\n    // Function to call when we have scrolled to the bottom of the results\n    loadMore: () => Promise<void>;\n}\n\nconst InfiniteScroll = ({\n  children,\n  error,\n  loadMore,\n}: InfiniteScrollProps): JSX.Element => {\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const observer = React.useRef<IntersectionObserver | null>();\n  const lastElementRef = React.useCallback((node) => {\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(async (entries) => {\n      if (entries[0].isIntersecting && !isLoading) {\n        setIsLoading(true);\n        await loadMore();\n        setIsLoading(false);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [isLoading, loadMore]);\n\n  return (\n    <div>\n      {children.map((child, index) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <div key={`Item ${index}`} ref={index === children.length - 1 ? lastElementRef : null}>\n          {child}\n        </div>\n      ))}\n      {error && (\n        <div className=\"error\">\n          <b>Error: </b>\n          {error}\n        </div>\n      )}\n      <LoadingIndicator\n        isLoading={isLoading}\n      />\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import React from 'react';\n\nimport SearchIcon from 'assets/search.svg';\n\nimport InfiniteScroll from 'components/sidebar/InfiniteScroll';\nimport LoadingIndicator from 'components/common/LoadingIndicator';\nimport TweetDisplay from 'components/common/TweetDisplay';\n\nimport 'styles/sidebar/Sidebar.scss';\n\nimport { Tweet } from 'utils/types';\n\ninterface SidebarProps {\n    error: string | undefined;\n    hashtag: string;\n    isLoading: boolean;\n    loadMoreTweets: () => Promise<void>;\n    tweets: Tweet[];\n    updateHashtag: (hashtag: string) => void;\n}\n\nconst Sidebar = ({\n  error,\n  hashtag,\n  isLoading,\n  loadMoreTweets,\n  tweets,\n  updateHashtag,\n}: SidebarProps): JSX.Element => {\n  const [hashtagInput, setHashtagInput] = React.useState(hashtag);\n\n  const searchBar = (\n    <div className=\"searchBar\">\n      <img alt=\"Search Icon\" src={SearchIcon} />\n      <input\n        className=\"hashtagInput\"\n        onChange={(e) => setHashtagInput(e.target.value)}\n        onKeyPress={(e) => {\n          if (e.key === 'Enter') {\n            updateHashtag(hashtagInput);\n          }\n        }}\n        placeholder=\"Search for a hashtag...\"\n        value={hashtagInput}\n      />\n    </div>\n  );\n\n  const displayTweets = isLoading\n    ? (\n      <LoadingIndicator\n        isLoading={isLoading}\n      />\n    )\n    : (\n      <InfiniteScroll\n        error={error}\n        loadMore={loadMoreTweets}\n      >\n        {tweets.map(\n          (tweet) => <TweetDisplay key={tweet.tweet.id} tweet={tweet} />,\n        )}\n      </InfiniteScroll>\n    );\n\n  return (\n    <div className=\"sidebar\">\n      {searchBar}\n      <div className=\"searchedHashtag\">\n        #\n        {hashtag}\n      </div>\n      {displayTweets}\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import React from 'react';\n\nimport getLocationDetails from 'api/geocoding';\nimport searchTweets from 'api/twitter';\n\nimport Map from 'components/map/Map';\nimport Sidebar from 'components/sidebar/Sidebar';\n\nimport { LocationsMap, Tweet } from 'utils/types';\n\nimport 'App.scss';\n\nconst DEFAULT_HASHTAG = 'CatsOfTwitter';\n\nfunction App(): JSX.Element {\n  const [hashtag, setHashtag] = React.useState(DEFAULT_HASHTAG);\n  const [tweets, setTweets] = React.useState<Tweet[]>([]);\n  const [pageToken, setPageToken] = React.useState<string | undefined>(undefined);\n  const [locationDetails, setLocationDetails] = React.useState<LocationsMap>({});\n\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [error, setError] = React.useState<string | undefined>(undefined);\n\n  // Callback used to load a 'page' of tweet and location data\n  const loadTweets = async () => {\n    try {\n      const tweetsJson = await searchTweets(hashtag, pageToken);\n      if (!tweetsJson.data.tweets) return;\n      setTweets([...tweets, ...tweetsJson.data.tweets]);\n      setPageToken(tweetsJson.next_token);\n\n      const locationsJson = await getLocationDetails(\n        tweetsJson.data.tweets.map((tweet) => tweet.author.location ?? '')\n          .filter((locationName) => locationName),\n      );\n      setLocationDetails({ ...locationDetails, ...locationsJson.data });\n    } catch (e) {\n      if (e instanceof Error) {\n        setError(e.message);\n      }\n    }\n  };\n\n  // Load tweets on mount and whenever hashtag is updated\n  React.useEffect(() => {\n    (async () => {\n      setIsLoading(true);\n      await loadTweets();\n      setIsLoading(false);\n    })();\n  }, [hashtag]);\n\n  return (\n    <div>\n      <Map tweetLocations={locationDetails} tweets={tweets} />\n      <Sidebar\n        error={error}\n        hashtag={hashtag}\n        isLoading={isLoading}\n        loadMoreTweets={loadTweets}\n        tweets={tweets}\n        updateHashtag={(newHashtag: string) => {\n          setTweets([]);\n          setPageToken(undefined);\n          setHashtag(newHashtag);\n        }}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}