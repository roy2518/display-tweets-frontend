(this["webpackJsonpdisplay-tweets"]=this["webpackJsonpdisplay-tweets"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),s=n.n(c),o=n(3),u=n.n(o),i=n(5),l=n(7),f=n(6),d=n(4),h=function(){var e=Object(f.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://secure-anchorage-29952.herokuapp.com").concat("/api/locations","?names=").concat(encodeURIComponent(JSON.stringify(t))),e.next=3,fetch(n);case 3:if(!(r=e.sent).ok){e.next=8;break}return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,r.json();case 10:throw a=e.sent,new Error(a.detail);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat("https://secure-anchorage-29952.herokuapp.com").concat("/api/tweets","?hashtag=").concat(t).concat(n?"&next_token=".concat(n):""),e.next=3,fetch(r);case 3:if(!(a=e.sent).ok){e.next=8;break}return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,a.json();case 10:throw c=e.sent,new Error(c.detail);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=n(14),b=n.n(p),A=n(17),m=(n(23),"http://twitter.com"),v=function(e){return"\n    ".concat(m,"/").concat(e,"\n")},x=function(e){switch(e.type){case"hashtag":return"#".concat(e.tag);case"mention":return"@".concat(e.username);case"url":return e.url;default:return""}},g=function(e){switch(e.type){case"hashtag":return t=e.tag,"\n    ".concat(m,"/hashtag/").concat(t,"?src=hashtag_click\n");case"mention":return v(e.username);case"url":return e.url;default:return""}var t},O=n(1),w=function(e){var t=e.tweet,n=t.tweet.text,r=function(e){var t,n,r,a,c,s,o=e.tweet.entities;return[].concat(Object(l.a)(null!==(t=null===(n=o.hashtags)||void 0===n?void 0:n.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"hashtag"})})))&&void 0!==t?t:[]),Object(l.a)(null!==(r=null===(a=o.mentions)||void 0===a?void 0:a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"mention"})})))&&void 0!==r?r:[]),Object(l.a)(null!==(c=null===(s=o.urls)||void 0===s?void 0:s.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{type:"url"})})))&&void 0!==c?c:[]))}(t),a={};r.forEach((function(e){for(var t=x(e),r=n.indexOf(t);-1!==r;)(!a[r]||t.length>x(a[r]).length)&&(a[r]=e),r=n.indexOf(t,r+1)}));var c=Object.keys(a).map((function(e){return parseInt(e,10)}));c.sort((function(e,t){return e-t}));var s=[],o=0;return c.forEach((function(e){var t=a[e],r=x(t);o<e&&s.push(Object(O.jsx)("span",{children:n.substring(o,e)},"Text ".concat(o))),s.push(Object(O.jsx)("a",{className:"entityLink",href:g(t),onClick:function(e){e.stopPropagation()},target:"_blank",rel:"noreferrer",children:n.substr(e,r.length)},"Entity ".concat(e))),o=e+r.length})),s.push(Object(O.jsx)("span",{children:n.substr(o)},"Remaining text")),Object(O.jsx)("div",{children:s})},y=(n(25),function(e){var t=e.tweet;return Object(O.jsxs)("div",{className:"tweetContainer",onClick:function(){var e;null===(e=window.open(function(e){return"\n    ".concat(m,"/").concat(e.author.username,"/status/").concat(e.tweet.id,"\n")}(t)))||void 0===e||e.focus()},children:[Object(O.jsx)("div",{children:Object(O.jsx)("a",{href:v(t.author.username),onClick:function(e){e.stopPropagation()},target:"_blank",rel:"noreferrer",children:Object(O.jsx)("img",{alt:"User Avatar",className:"userAvatar",src:t.author.profile_image_url})})}),Object(O.jsxs)("div",{className:"tweetBody",children:[Object(O.jsxs)("div",{className:"tweetHeader",children:[Object(O.jsx)("a",{href:v(t.author.username),onClick:function(e){e.stopPropagation()},target:"_blank",rel:"noreferrer",children:Object(O.jsx)("span",{className:"authorName",children:t.author.name})}),Object(O.jsx)("div",{className:"dotSeparator",children:"\xb7"}),Object(O.jsx)("span",{className:"timestamp",children:Object(O.jsx)(A.a,{date:t.tweet.created_at})})]}),Object(O.jsx)("div",{className:"tweetText",children:Object(O.jsx)(w,{tweet:t})})]})]})}),C=(n(26),function(e){var t=e.tweetLocations,n=e.tweets,r=a.a.useRef(null),c=a.a.useRef(null),o=function(e,t){return e.filter((function(e){return e.author.location&&t[e.author.location]})).map((function(e){var n;return function(e,t){return{geometry:{type:"Point",coordinates:[t.lon,t.lat]},properties:{data:e},type:"Feature"}}(e,t[null!==(n=e.author.location)&&void 0!==n?n:""])}))}(n,t);return a.a.useEffect((function(){var e,t;b.a.accessToken=null!==(e="pk.eyJ1Ijoicm95eGlvbmcxIiwiYSI6ImNrc3Njdm5mNDB2bTQydXB1cnZ5MmswenYifQ.u6NfMqh-o3td_zRcHTmU5w")?e:"",c.current=new b.a.Map({container:null!==(t=r.current)&&void 0!==t?t:"",style:"mapbox://styles/mapbox/dark-v10",zoom:-1})}),[]),a.a.useEffect((function(){if(null!=c.current){var e=c.current;e.on("style.load",(function(){e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAMAAACo9wirAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUVBMVEX///9CZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPtCZPsArO59lfytvP1mgfz////o7P/c4v6VqP2hsv25xf709v/Ez/6Jnv3zlxxEAAAADnRSTlMAMIDAUNAgQGAQ4JCwcIspriIAAAABYktHRACIBR1IAAAAB3RJTUUH5QgcDysw+xcJjwAAAAFvck5UAc+id5oAAAEKSURBVDjLfZTtGoIgDIVRErV0IFpa93+hGcE2lXF++LHzPnMMplKoqtYQpOtKXXVrgKm5nWyj4SRtuN9CRi35HWTVYXUgKNba3yXg3gfgAaIeYQHxxbopxSdn45PhCbyf3e/uZu95Cqxg8buW/xWroC8APD3qiUHDe0QA71ZNL0vyF4rVHHgl4CUAawJWAdgSsHGAirRUpMVgy3bqTcCb7xdf5eym6ddIWufeySE+frY1Zrbr9onBYQdGKGhUvNcZhYM5yP4gn9i0yCAt+bp06FkCMYXGuRAWwmYr24uRz54ufSAMzxXoj+N9Gb/LL+I0wJ1SRSLjH4iszwjBR0L04660qqCqacwx8gXR7DNsGIBhpQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOC0yOFQxNTo0Mzo0OCswMDowMNlRykYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDgtMjhUMTU6NDM6NDgrMDA6MDCoDHL6AAAAAElFTkSuQmCC",(function(t,n){if(t)throw t;var r=n;e.addImage("custom-marker",r),e.addSource("points",{data:{type:"FeatureCollection",features:o},type:"geojson"}),e.addLayer({id:"symbols",type:"symbol",source:"points",layout:{"icon-image":"custom-marker","icon-size":.6}})}))}))}}),[]),a.a.useEffect((function(){var e=c.current;e&&e.on("click","symbols",(function(t){if(t.features&&"Point"===t.features[0].geometry.type){var n=t.features[0].geometry.coordinates;e.flyTo({center:[n[0],n[1]],zoom:5})}}))}),[]),a.a.useEffect((function(){Object(f.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===c.current){e.next=8;break}case 1:if(c.current.loaded&&c.current.getSource("points")){e.next=6;break}return e.next=4,new Promise((function(e){return setTimeout(e,200)}));case 4:e.next=1;break;case 6:c.current.getSource("points").setData({type:"FeatureCollection",features:o});case 8:case"end":return e.stop()}}),e)})))()}),[t,n]),a.a.useEffect((function(){var e=c.current,t=new b.a.Popup({maxWidth:"300px"});null!==e&&(e.on("click","symbols",(function(n){if(n.features&&"Point"===n.features[0].geometry.type){for(var r,a,c=n.features[0].geometry.coordinates;Math.abs(n.lngLat.lng-c[0])>180;)c[0]+=n.lngLat.lng>c[0]?360:-360;var o=document.createElement("div"),u=JSON.parse(null===(r=n.features)||void 0===r||null===(a=r[0].properties)||void 0===a?void 0:a.data);s.a.render(Object(O.jsx)(y,{tweet:u}),o),t.setLngLat([c[0],c[1]]).setDOMContent(o).addTo(e)}})),e.on("mouseenter","symbols",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","symbols",(function(){e.getCanvas().style.cursor=""})))}),[]),Object(O.jsx)("div",{ref:r,className:"map"})}),k=n.p+"static/media/search.a9a21c42.svg",N=n(16),M=n.n(N),P=(n(47),function(e){var t=e.isLoading;return Object(O.jsx)("div",{className:"loader",children:Object(O.jsx)(M.a,{color:"#1DA1F2",height:25,type:"Oval",visible:t,width:25})})}),S=(n(48),function(e){var t=e.children,n=e.error,r=e.loadMore,c=a.a.useState(!1),s=Object(d.a)(c,2),o=s[0],i=s[1],l=a.a.useRef(),h=a.a.useCallback((function(e){l.current&&l.current.disconnect(),l.current=new IntersectionObserver(function(){var e=Object(f.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[0].isIntersecting||o){e.next=5;break}return i(!0),e.next=4,r();case 4:i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e&&l.current.observe(e)}),[o,r]);return Object(O.jsxs)("div",{children:[t.map((function(e,n){return Object(O.jsx)("div",{ref:n===t.length-1?h:null,children:e},"Item ".concat(n))})),n&&Object(O.jsxs)("div",{className:"error",children:[Object(O.jsx)("b",{children:"Error: "}),n]}),Object(O.jsx)(P,{isLoading:o})]})}),E=(n(49),function(e){var t=e.error,n=e.hashtag,r=e.isLoading,c=e.loadMoreTweets,s=e.tweets,o=e.updateHashtag,u=a.a.useState(n),i=Object(d.a)(u,2),l=i[0],f=i[1],h=Object(O.jsxs)("div",{className:"searchBar",children:[Object(O.jsx)("img",{alt:"Search Icon",src:k}),Object(O.jsx)("input",{className:"hashtagInput",onChange:function(e){return f(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&o(l)},placeholder:"Search for a hashtag...",value:l})]}),j=r?Object(O.jsx)(P,{isLoading:r}):Object(O.jsx)(S,{error:t,loadMore:c,children:s.map((function(e){return Object(O.jsx)(y,{tweet:e},e.tweet.id)}))});return Object(O.jsxs)("div",{className:"sidebar",children:[h,Object(O.jsxs)("div",{className:"searchedHashtag",children:["#",n]}),j]})});n(50);var I=function(){var e=a.a.useState("CatsOfTwitter"),t=Object(d.a)(e,2),n=t[0],r=t[1],c=a.a.useState([]),s=Object(d.a)(c,2),o=s[0],p=s[1],b=a.a.useState(void 0),A=Object(d.a)(b,2),m=A[0],v=A[1],x=a.a.useState({}),g=Object(d.a)(x,2),w=g[0],y=g[1],k=a.a.useState(!1),N=Object(d.a)(k,2),M=N[0],P=N[1],S=a.a.useState(void 0),I=Object(d.a)(S,2),R=I[0],L=I[1],T=function(){var e=Object(f.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(n,m);case 3:if((t=e.sent).data.tweets){e.next=6;break}return e.abrupt("return");case 6:return p([].concat(Object(l.a)(o),Object(l.a)(t.data.tweets))),v(t.next_token),e.next=10,h(t.data.tweets.map((function(e){var t;return null!==(t=e.author.location)&&void 0!==t?t:""})).filter((function(e){return e})));case 10:r=e.sent,y(Object(i.a)(Object(i.a)({},w),r.data)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),e.t0 instanceof Error&&L(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){Object(f.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,T();case 3:P(!1);case 4:case"end":return e.stop()}}),e)})))()}),[n]),Object(O.jsxs)("div",{children:[Object(O.jsx)(C,{tweetLocations:w,tweets:o}),Object(O.jsx)(E,{error:R,hashtag:n,isLoading:M,loadMoreTweets:T,tweets:o,updateHashtag:function(e){p([]),v(void 0),r(e)}})]})};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(I,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.8cdcef0b.chunk.js.map